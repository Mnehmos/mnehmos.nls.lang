# DO NOT EDIT - Generated by nlsc
# 2026-01-18T23:56:29.928855+00:00

schema_version: 1
generated_at: 2026-01-18T23:56:29.928855+00:00
compiler_version: 0.2.1
llm_backend: mock

modules:
  billing:
    source_hash: sha256:0173a9c2e4cd
    anlus:
      calculate-line-total:
        source_hash: sha256:65c4a509c10c
        output_hash: sha256:ed4335c5a89f
        output_lines: 45
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
      calculate-subtotal:
        source_hash: sha256:5ee6c535d43c
        output_hash: sha256:6b02b1b08de2
        output_lines: 59
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              subtotal = None  # TODO: Sum each item's total
              return subtotal
      apply-discount:
        source_hash: sha256:da0c0f42578d
        output_hash: sha256:ced283e8fc0b
        output_lines: 79
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              subtotal = None  # TODO: Sum each item's total
              return subtotal
          
          
          def apply_discount(amount: float, discount_percent: float) -> Any:
              """
              Apply a percentage discount to an amount.
          
              Args:
                  amount: number
                  discount_percent: number
          
              Returns:
                  amount * (1 - discount_percent / 100)
              """
              if not (discount_percent >= 0):
                  raise ValueError('Discount cannot be negative')
              if not (discount_percent <= 100):
                  raise ValueError('Discount cannot exceed 100%')
              discount = None  # TODO: Calculate discount amount
              final = None  # TODO: Subtract from original
              return amount * (1 - discount_percent / 100)
      calculate-tax:
        source_hash: sha256:d93c213ce785
        output_hash: sha256:753c5bdcdee4
        output_lines: 95
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              subtotal = None  # TODO: Sum each item's total
              return subtotal
          
          
          def apply_discount(amount: float, discount_percent: float) -> Any:
              """
              Apply a percentage discount to an amount.
          
              Args:
                  amount: number
                  discount_percent: number
          
              Returns:
                  amount * (1 - discount_percent / 100)
              """
              if not (discount_percent >= 0):
                  raise ValueError('Discount cannot be negative')
              if not (discount_percent <= 100):
                  raise ValueError('Discount cannot exceed 100%')
              discount = None  # TODO: Calculate discount amount
              final = None  # TODO: Subtract from original
              return amount * (1 - discount_percent / 100)
          
          
          def calculate_tax(amount: float, tax_rate: float) -> Any:
              """
              Calculate tax on a given amount.
          
              Args:
                  amount: number
                  tax_rate: number
          
              Returns:
                  amount * (tax_rate / 100)
              """
              if not (tax_rate >= 0):
                  raise ValueError('Tax rate cannot be negative')
              return amount * (tax_rate / 100)
      calculate-invoice-total:
        source_hash: sha256:b6fead91ee48
        output_hash: sha256:10e5c15b4b49
        output_lines: 112
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              subtotal = None  # TODO: Sum each item's total
              return subtotal
          
          
          def apply_discount(amount: float, discount_percent: float) -> Any:
              """
              Apply a percentage discount to an amount.
          
              Args:
                  amount: number
                  discount_percent: number
          
              Returns:
                  amount * (1 - discount_percent / 100)
              """
              if not (discount_percent >= 0):
                  raise ValueError('Discount cannot be negative')
              if not (discount_percent <= 100):
                  raise ValueError('Discount cannot exceed 100%')
              discount = None  # TODO: Calculate discount amount
              final = None  # TODO: Subtract from original
              return amount * (1 - discount_percent / 100)
          
          
          def calculate_tax(amount: float, tax_rate: float) -> Any:
              """
              Calculate tax on a given amount.
          
              Args:
                  amount: number
                  tax_rate: number
          
              Returns:
                  amount * (tax_rate / 100)
              """
              if not (tax_rate >= 0):
                  raise ValueError('Tax rate cannot be negative')
              return amount * (tax_rate / 100)
          
          
          def calculate_invoice_total(invoice: Invoice) -> Any:
              """
              Calculate the final total for an invoice including tax and discount.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  total
              """
              subtotal = None  # TODO: Calculate subtotal from all items
              discounted = None  # TODO: Apply discount to subtotal
              tax = None  # TODO: Calculate tax on discounted amount
              total = None  # TODO: Add tax to discounted amount
              return total

targets:
  python:
    file: examples\billing.py
    hash: sha256:9be2c30840ee
    lines: 122