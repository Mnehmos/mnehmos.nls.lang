# DO NOT EDIT - Generated by nlsc
# 2026-01-18T20:02:31.207805+00:00

schema_version: 1
generated_at: 2026-01-18T20:02:31.207805+00:00
compiler_version: 0.1.0
llm_backend: mock

modules:
  billing:
    source_hash: sha256:0173a9c2e4cd
    anlus:
      calculate-line-total:
        source_hash: sha256:65c4a509c10c
        output_hash: sha256:a527f04d258b
        output_lines: 49
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
                  if self.quantity < 1:
                      raise ValueError('quantity must be at least 1')
                  if self.unit_price < 0:
                      raise ValueError('unit_price must be at least 0')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
      calculate-subtotal:
        source_hash: sha256:5ee6c535d43c
        output_hash: sha256:13ed0be94f07
        output_lines: 64
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
                  if self.quantity < 1:
                      raise ValueError('quantity must be at least 1')
                  if self.unit_price < 0:
                      raise ValueError('unit_price must be at least 0')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              # Sum each item's total
              subtotal = None  # TODO: implement
              return subtotal
      apply-discount:
        source_hash: sha256:da0c0f42578d
        output_hash: sha256:902b11729a97
        output_lines: 86
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
                  if self.quantity < 1:
                      raise ValueError('quantity must be at least 1')
                  if self.unit_price < 0:
                      raise ValueError('unit_price must be at least 0')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              # Sum each item's total
              subtotal = None  # TODO: implement
              return subtotal
          
          
          def apply_discount(amount: float, discount_percent: float) -> Any:
              """
              Apply a percentage discount to an amount.
          
              Args:
                  amount: number
                  discount_percent: number
          
              Returns:
                  amount * (1 - discount_percent / 100)
              """
              if not (discount_percent >= 0):
                  raise ValueError('Discount cannot be negative')
              if not (discount_percent <= 100):
                  raise ValueError('Discount cannot exceed 100%')
              # Calculate discount amount
              discount = None  # TODO: implement
              # Subtract from original
              final = None  # TODO: implement
              return amount * (1 - discount_percent / 100)
      calculate-tax:
        source_hash: sha256:d93c213ce785
        output_hash: sha256:be8113921b99
        output_lines: 102
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
                  if self.quantity < 1:
                      raise ValueError('quantity must be at least 1')
                  if self.unit_price < 0:
                      raise ValueError('unit_price must be at least 0')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              # Sum each item's total
              subtotal = None  # TODO: implement
              return subtotal
          
          
          def apply_discount(amount: float, discount_percent: float) -> Any:
              """
              Apply a percentage discount to an amount.
          
              Args:
                  amount: number
                  discount_percent: number
          
              Returns:
                  amount * (1 - discount_percent / 100)
              """
              if not (discount_percent >= 0):
                  raise ValueError('Discount cannot be negative')
              if not (discount_percent <= 100):
                  raise ValueError('Discount cannot exceed 100%')
              # Calculate discount amount
              discount = None  # TODO: implement
              # Subtract from original
              final = None  # TODO: implement
              return amount * (1 - discount_percent / 100)
          
          
          def calculate_tax(amount: float, tax_rate: float) -> Any:
              """
              Calculate tax on a given amount.
          
              Args:
                  amount: number
                  tax_rate: number
          
              Returns:
                  amount * (tax_rate / 100)
              """
              if not (tax_rate >= 0):
                  raise ValueError('Tax rate cannot be negative')
              return amount * (tax_rate / 100)
      calculate-invoice-total:
        source_hash: sha256:b6fead91ee48
        output_hash: sha256:40785f3bdfd2
        output_lines: 123
        generated_code: |
          @dataclass
          class LineItem:
              description: str
              quantity: float
              unit_price: float
          
              def __post_init__(self):
                  if not self.description:
                      raise ValueError('description is required')
                  if self.quantity < 1:
                      raise ValueError('quantity must be at least 1')
                  if self.unit_price < 0:
                      raise ValueError('unit_price must be at least 0')
          
          
          @dataclass
          class Invoice:
              id: str
              customer_name: str
              items: list[LineItem]
              tax_rate: float
              discount_percent: float
          
              def __post_init__(self):
                  if not self.id:
                      raise ValueError('id is required')
                  if not self.customer_name:
                      raise ValueError('customer_name is required')
                  if not (self.tax_rate >= 0):
                      raise ValueError("Invariant violated: tax_rate >= 0")
                  if not (self.tax_rate <= 100):
                      raise ValueError("Invariant violated: tax_rate <= 100")
                  if not (self.discount_percent >= 0):
                      raise ValueError("Invariant violated: discount_percent >= 0")
                  if not (self.discount_percent <= 100):
                      raise ValueError("Invariant violated: discount_percent <= 100")
          
          
          def calculate_line_total(item: LineItem) -> float:
              """
              Calculate the total for a single line item.
          
              Args:
                  item: LineItem
          
              Returns:
                  item.quantity * item.unit_price
              """
              return item.quantity * item.unit_price
          
          
          def calculate_subtotal(invoice: Invoice) -> Any:
              """
              Sum all line item totals for an invoice.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  subtotal
              """
              # Sum each item's total
              subtotal = None  # TODO: implement
              return subtotal
          
          
          def apply_discount(amount: float, discount_percent: float) -> Any:
              """
              Apply a percentage discount to an amount.
          
              Args:
                  amount: number
                  discount_percent: number
          
              Returns:
                  amount * (1 - discount_percent / 100)
              """
              if not (discount_percent >= 0):
                  raise ValueError('Discount cannot be negative')
              if not (discount_percent <= 100):
                  raise ValueError('Discount cannot exceed 100%')
              # Calculate discount amount
              discount = None  # TODO: implement
              # Subtract from original
              final = None  # TODO: implement
              return amount * (1 - discount_percent / 100)
          
          
          def calculate_tax(amount: float, tax_rate: float) -> Any:
              """
              Calculate tax on a given amount.
          
              Args:
                  amount: number
                  tax_rate: number
          
              Returns:
                  amount * (tax_rate / 100)
              """
              if not (tax_rate >= 0):
                  raise ValueError('Tax rate cannot be negative')
              return amount * (tax_rate / 100)
          
          
          def calculate_invoice_total(invoice: Invoice) -> Any:
              """
              Calculate the final total for an invoice including tax and discount.
          
              Args:
                  invoice: Invoice
          
              Returns:
                  total
              """
              # Calculate subtotal from all items
              subtotal = None  # TODO: implement
              # Apply discount to subtotal
              discounted = None  # TODO: implement
              # Calculate tax on discounted amount
              tax = None  # TODO: implement
              # Add tax to discounted amount
              total = None  # TODO: implement
              return total

targets:
  python:
    file: examples\billing.py
    hash: sha256:5db72ea3e7e6
    lines: 133